!function(f){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=f();else if("function"==typeof define&&define.amd)define([],f);else{var g;g="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,g.VueTables=f()}}(function(){return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){module.exports={get:function(){return Math.ceil(this.page/this.options.pagination.chunk)}}},{}],2:[function(require,module,exports){function range(start,count){return Array.apply(0,Array(count)).map(function(element,index){return index+start})}module.exports=function(){return range(1,this.options.pagination.chunk)}},{}],3:[function(require,module,exports){module.exports={get:function(){return(this.currentChunk-1)*this.options.pagination.chunk+1}}},{}],4:[function(require,module,exports){module.exports=function(){return this.options.filterByColumn?JSON.stringify(this.query):this.query}},{}],5:[function(require,module,exports){module.exports={get:function(){return Math.ceil(this.totalPages/this.options.pagination.chunk)}}},{}],6:[function(require,module,exports){module.exports={get:function(){return Math.ceil(this.count/this.limit)}}},{}],7:[function(require,module,exports){module.exports=function(){return{columns:[],dateColumns:[],datepickerOptions:{},perPage:10,perPageValues:[10,25,50,100],sortable:[],templates:{},compileTemplates:!1,delay:500,dateFormat:"DD/MM/YYYY",skin:"table-striped table-bordered table-hover",texts:{count:"{count} Records",filter:"Filter Results:",filterPlaceholder:"Search query",limit:"Records:",page:"Page:",noResults:"No matching records",filterBy:"Filter by {column}"},filterByColumn:!1,highlightMatches:!1,orderBy:!1,footerHeadings:!1,headings:{},pagination:{dropdown:!1,chunk:10}}}},{}],8:[function(require,module,exports){var is_valid_moment_object=require("../helpers/is-valid-moment-object");module.exports=function(property){return is_valid_moment_object(property)?property.format(this.options.dateFormat):property}},{"../helpers/is-valid-moment-object":16}],9:[function(require,module,exports){module.exports=function(property,column){if(!this.options.highlightMatches||this.templatesKeys.indexOf(column)>-1)return property;var query=this.options.filterByColumn?this.query[column]:this.query;return query?(query=new RegExp(query,"i"),property=String(property).replace(query,function(highlight){return"<b class='VueTables__highlight'>"+highlight+"</b>"})):property}},{}],10:[function(require,module,exports){module.exports=function(data){var limit=parseInt(this.limit),page=parseInt(this.page),offset=limit*(page-1);return data.slice(offset,limit+offset)}},{}],11:[function(require,module,exports){function wrapTemplate(tpl){return"<span class='VueTables__template'>"+tpl+"</span>"}module.exports=function(value,row,column){if(-1==this.templatesKeys.indexOf(column))return value;var regex;if("function"==typeof this.options.templates[column]){var tpl=this.options.templates[column](row);return wrapTemplate(tpl)}var template=wrapTemplate(this.options.templates[column]);return this.allColumns.forEach(function(col){regex=new RegExp("{"+col+"}","g"),template=template.replace(regex,String(row[col]))}.bind(this)),template}},{}],12:[function(require,module,exports){function setCurrentQuery(query){return query?"string"==typeof query?query.toLowerCase():query:""}function foundMatch(query,value){if("string"==typeof value)return value.indexOf(query)>-1;var start=moment(query.start,"YYYY-MM-DD"),end=moment(query.end,"YYYY-MM-DD");return value>=start&&end>=value}function getValue(val,filterByDate,dateFormat){return is_valid_moment_object(val)?filterByDate?val:val.format(dateFormat):String(val).toLowerCase()}var object_filled_keys_count=require("../helpers/object-filled-keys-count"),is_valid_moment_object=require("../helpers/is-valid-moment-object");module.exports=function(data,query){var totalQueries=query?1:0;if(this.options.filterByColumn&&(query=JSON.parse(query),totalQueries=object_filled_keys_count(query)),!totalQueries)return data;var value,found,currentQuery,filterByDate,dateFormat=this.options.dateFormat;return data.filter(function(row,index){return found=0,this.queryable.forEach(function(column){filterByDate=this.options.dateColumns.indexOf(column)>-1&&this.options.filterByColumn,value=getValue(row[column],filterByDate,dateFormat),currentQuery=this.options.filterByColumn?query[column]:query,currentQuery=setCurrentQuery(currentQuery),currentQuery&&foundMatch(currentQuery,value)&&found++}.bind(this)),found>=totalQueries}.bind(this))}},{"../helpers/is-valid-moment-object":16,"../helpers/object-filled-keys-count":17}],13:[function(require,module,exports){module.exports=function(data){return this.count=data.length,data}},{}],14:[function(require,module,exports){module.exports=function(a){return this.filter?this.filter(function(i){return a.indexOf(i)<0}):[]}},{}],15:[function(require,module,exports){module.exports=function(replacements){var template=require("../table-template.html");for(var replacement in replacements)template=template.replace("[["+replacement+"]]",replacements[replacement]);return template}},{"../table-template.html":46}],16:[function(require,module,exports){module.exports=function(val){return val&&"function"==typeof val.isValid&&val.isValid()}},{}],17:[function(require,module,exports){module.exports=function(obj){var count=0;for(var prop in obj){var isDateRange="object"==typeof obj[prop];(isDateRange||obj[prop].trim())&&count++}return count}},{}],18:[function(require,module,exports){module.exports=function(obj){var keys=[];for(var prop in obj)keys.push(prop);return keys}},{}],19:[function(require,module,exports){module.exports=function(){return this.charAt(0).toUpperCase()+this.slice(1)}},{}],20:[function(require,module,exports){module.exports=function(index){return this.page==index+1?"active":""}},{}],21:[function(require,module,exports){module.exports=function(){this.data.forEach(function(row,index){this.customColumns.forEach(function(custom){this.$set("data["+index+"]."+custom,this.options.templates[custom])}.bind(this))}.bind(this))}},{}],22:[function(require,module,exports){module.exports=function(direction){return 1==direction&&this.currentChunk==this.totalChunks||-1==direction&&1==this.currentChunk}},{}],23:[function(require,module,exports){module.exports=function(direction){var page=(this.currentChunk-1+direction)*this.options.pagination.chunk+1;this.setPage(page)}},{}],24:[function(require,module,exports){module.exports=function(){var tbody=this.$els.tbody;this.$compile(tbody)}},{}],25:[function(require,module,exports){module.exports=function(text,value){if(!this.options.texts)return"";var text=this.options.texts[text];return text&&value&&(text=text.replace(/{.+}/,value)),text}},{}],26:[function(require,module,exports){module.exports=function(){var data={query:this.query,limit:this.limit,orderBy:this.orderBy.column,ascending:this.orderBy.ascending,page:this.page,byColumn:this.options.filterByColumn?1:0};return this.$dispatch("vue-tables.loading",data),this.$http.get(this.url,data)}},{}],27:[function(require,module,exports){module.exports=function(value){return this.options.headings.hasOwnProperty(value)?this.options.headings[value]:value.split("_").join(" ").ucfirst()}},{}],28:[function(require,module,exports){var merge=require("merge");module.exports=function(){var el,datepickerOptions=merge.recursive(this.options.datepickerOptions,{autoUpdateInput:!1,singleDatePicker:!1,locale:{format:this.options.dateFormat}}),that=this;that.options.dateColumns.forEach(function(column){el=$(that.$el).find("input[name="+column+"]"),el.daterangepicker(datepickerOptions),el.on("apply.daterangepicker",function(ev,picker){that.query[column]={start:picker.startDate.format("YYYY-MM-DD"),end:picker.endDate.format("YYYY-MM-DD")},$(this).val(picker.startDate.format(that.options.dateFormat)+" - "+picker.endDate.format(that.options.dateFormat)),"server"==that.source&&that.search()})})}},{merge:49}],29:[function(require,module,exports){var merge=require("merge");module.exports=function(defaults,globalOptions,localOptions){return globalOptions&&(defaults=merge.recursive(defaults,globalOptions)),localOptions=merge.recursive(defaults,localOptions)}},{merge:49}],30:[function(require,module,exports){module.exports=function(column){return this.options.orderBy?(this.orderBy.column=this.options.orderBy.column,void(this.orderBy.ascending=this.options.orderBy.ascending?1:-1)):void(this.orderBy.column=column)}},{}],31:[function(require,module,exports){module.exports=function(queryable){if(!this.options.filterByColumn)return"";var query={};return queryable.forEach(function(column){query[column]=""}.bind(this)),query}},{}],32:[function(require,module,exports){module.exports=function(colName){this.sortable(colName)&&(colName==this.orderBy.column&&(this.orderBy.ascending=1==this.orderBy.ascending?-1:1),this.orderBy.column=colName,"server"==this.source&&this.getData().then(function(data){this.setData(data.data)}.bind(this)))}},{}],33:[function(require,module,exports){module.exports=function(direction){return 1==direction&&this.page==this.totalPages||-1==direction&&1==this.page}},{}],34:[function(require,module,exports){module.exports=function(){this.search(this.byColumn)}},{}],35:[function(require,module,exports){module.exports=function(){if("client"==this.source)return void(this.page=1);var elapsed;this.lastKeyStrokeAt=new Date,setTimeout(function(){elapsed=new Date-this.lastKeyStrokeAt,elapsed>=this.options.delay&&(this.page=1,this.getData().then(function(data){var data=data.data;this.setData(data)}.bind(this)))}.bind(this),this.options.delay)}},{}],36:[function(require,module,exports){module.exports=function(){var expressions=["count","limit","page","orderBy.column","orderBy.ascending"];expressions.forEach(function(expression){this.$watch(expression,function(){setTimeout(function(){this.compileTemplates()}.bind(this),0)})}.bind(this))}},{}],37:[function(require,module,exports){module.exports=function(data){this.data=data.data,this.count=data.count,this.addCustomColumns(),setTimeout(function(){this.$dispatch("vue-tables.loaded",data)}.bind(this),0)}},{}],38:[function(require,module,exports){module.exports=function(page){this.page=page,"server"==this.source&&this.getData().then(function(data){this.setData(data.data)}.bind(this))}},{}],39:[function(require,module,exports){module.exports=function(column){return this.sortable(column)?column!=this.orderBy.column?"":1==this.orderBy.ascending?"glyphicon-chevron-up":"glyphicon-chevron-down":void 0}},{}],40:[function(require,module,exports){module.exports=function(column){return this.sortable(column)?"VueTables__sortable":""}},{}],41:[function(require,module,exports){module.exports=function(column){var isCustomColumn=this.customColumns.indexOf(column)>-1;if(isCustomColumn)return!1;var sortAll=!this.options.sortable.length;return sortAll?!0:this.options.sortable.indexOf(column)>-1}},{}],42:[function(require,module,exports){module.exports={computed:{totalPages:require("../computed/total-pages"),paginationStart:require("../computed/pagination-start"),totalChunks:require("../computed/total-chunks"),currentChunk:require("../computed/current-chunk"),pages:require("../computed/pages")}}},{"../computed/current-chunk":1,"../computed/pages":2,"../computed/pagination-start":3,"../computed/total-chunks":5,"../computed/total-pages":6}],43:[function(require,module,exports){module.exports={data:function(){return{columns:[],allColumns:!1,totalPages:null,query:null,page:1,count:0,limit:10,queryable:[],orderBy:{column:"id",ascending:1}}}}},{}],44:[function(require,module,exports){module.exports={filters:{render:require("../filters/render"),highlightMatches:require("../filters/highlight-matches")}}},{"../filters/highlight-matches":9,"../filters/render":11}],45:[function(require,module,exports){module.exports={methods:{initQuery:require("../methods/init-query"),initOptions:require("../methods/init-options"),active:require("../methods/active"),sortableClass:require("../methods/sortable-class"),sortableChevronClass:require("../methods/sortable-chevron-class"),display:require("../methods/display"),orderByColumn:require("../methods/order-by-column"),getHeading:require("../methods/get-heading"),setPage:require("../methods/set-page"),addCustomColumns:require("../methods/add-custom-columns"),sortable:require("../methods/sortable"),chunk:require("../methods/chunk"),pageNavDisabled:require("../methods/page-nav-disabled"),chunkNavDisabled:require("../methods/chunk-nav-disabled"),display:require("../methods/display"),search:require("../methods/search"),initOrderBy:require("../methods/init-order-by"),compileTemplates:require("../methods/compile-templates"),initDateFilters:require("../methods/init-date-filters")}}},{"../methods/active":20,"../methods/add-custom-columns":21,"../methods/chunk":23,"../methods/chunk-nav-disabled":22,"../methods/compile-templates":24,"../methods/display":25,"../methods/get-heading":27,"../methods/init-date-filters":28,"../methods/init-options":29,"../methods/init-order-by":30,"../methods/init-query":31,"../methods/order-by-column":32,"../methods/page-nav-disabled":33,"../methods/search":35,"../methods/set-page":38,"../methods/sortable":41,"../methods/sortable-chevron-class":39,"../methods/sortable-class":40}],46:[function(require,module,exports){module.exports='<div class="VueTables VueTables--[[source]]">\n  <div class="row">\n    <div class="col-md-6">\n      <div v-if="!options.filterByColumn" class="form-group form-inline pull-left VueTables__search">\n        <label>{{display(\'filter\')}}</label>\n        <input class="form-control"\n        type="text"\n        placeholder="{{display(\'filterPlaceholder\')}}"\n        @keyup="search()"\n        v-model="query"/>\n      </div>\n    </div>\n\n    <div class="col-md-6">\n      <div v-if="options.pagination && options.pagination.dropdown && totalPages>0"\n        class="form-group form-inline pull-right VueTables__dropdown-pagination">\n        <label>{{display(\'page\')}}</label>\n        <select class="form-control"\n        v-model="page"\n        @change="setPage(page)">\n        <option v-for="page in totalPages">{{page+1}}</option>\n      </select>\n    </div>\n\n    <div class="form-group form-inline pull-right VueTables__limit">\n     <label>{{display(\'limit\')}}</label>\n     <select class="form-control"\n     v-model="limit"\n     @change="setPage(1)" >\n     <option v-for="value in options.perPageValues">{{value}}</option>\n   </select>\n </div>\n</div>\n</div>\n\n<table class="VueTables__table table" v-bind:class="options.skin">\n  <thead>\n    <tr>\n     <th @click="orderByColumn(column)"\n     v-for="column in columns"\n     v-bind:class="sortableClass(column)"><span class="VueTables__heading">{{getHeading(column)}}</span>\n     <span v-if="sortable(column)"\n           class="VueTables__sort-icon glyphicon pull-right"\n     v-bind:class="sortableChevronClass(column)"></span></th>\n   </tr>\n   <tr v-if="options.filterByColumn" class="VueTables__filters-row">\n    <th v-for="column in columns">\n      <input @keyup="search()"\n             v-if="options.dateColumns.indexOf(column)==-1 && customColumns.indexOf(column)==-1"\n             class="form-control"\n             type="text"\n             placeholder="{{display(\'filterBy\',getHeading(column))}}"\n             name="{{column}}"\n             v-model="query[column]">\n\n              <input @keyup="search()"\n             v-if="options.dateColumns.indexOf(column)>-1"\n             class="form-control"\n             placeholder="{{display(\'filterBy\',getHeading(column))}}"\n             name="{{column}}">\n    </th>\n  </tr>\n</thead>\n<tfoot v-if="options.footerHeadings">\n   <tr>\n     <th @click="orderByColumn(column)"\n     v-for="column in columns"\n     v-bind:class="sortableClass(column)"><span class="VueTables__heading">{{getHeading(column)}}</span>\n     <span v-if="sortable(column)"\n           class="VueTables__sort-icon glyphicon pull-right"\n     v-bind:class="sortableChevronClass(column)"></span></th>\n   </tr>\n</tfoot>\n<tbody v-el:tbody>\n <tr v-for="row in data [[rowFilters]]" [[trackBy]]>\n   <td v-for="column in columns"\n   v-html="row[column] | render row column [[columnFilters]]"></td>\n </tr>\n\n<tr v-if="count==0"\nclass="VueTables__no-results">\n<td class="text-center"\ncolspan="{{columns.length}}">\n{{display(\'noResults\')}}\n</td>\n</tr>\n</tbody>\n</table>\n\n<ul v-show="totalPages>1"\n  v-if="options.pagination && !options.pagination.dropdown"\n  class="pagination VueTables__pagination">\n\n  <li class="VueTables__pagination-item VueTables__pagination-item-prev-chunk"\n  v-bind:class="chunkNavDisabled(-1)?\'disabled\':\'\'">\n  <a href="javascript:void(0);"\n  @click="!chunkNavDisabled(-1) && chunk(-1)"><<</a>\n</li>\n\n\n<li class="VueTables__pagination-item VueTables__pagination-item-prev-page"\nv-bind:class="pageNavDisabled(-1)?\'disabled\':\'\'">\n<a href="javascript:void(0);"\n@click="!pageNavDisabled(-1) && setPage(page-1)"><</a>\n</li>\n\n<li class="VueTables__pagination-item"\nv-for="page in pages"\nv-if="paginationStart + page <= totalPages"\nv-bind:class="active(paginationStart + $index - 1)">\n<a href="javascript:void(0);"\n@click="setPage(paginationStart + $index)">{{paginationStart + $index}}</a>\n</li>\n\n<li class="VueTables__pagination-item VueTables__pagination-item-next-page"\nv-bind:class="pageNavDisabled(1)?\'disabled\':\'\'">\n<a href="javascript:void(0);"\n@click="!pageNavDisabled(1) && setPage(page+1)">></a>\n</li>\n\n<li class="VueTables__pagination-item VueTables__pagination-item-next-chunk"\nv-bind:class="chunkNavDisabled(1)?\'disabled\':\'\'">\n<a href="javascript:void(0);"\n@click="!chunkNavDisabled(1) && chunk(1)">>></a>\n</li>\n</ul>\n\n<p v-if="count!=0"\nclass="VueTables__count">{{display(\'count\', count)}}</p>\n</div>\n'},{}],47:[function(require,module,exports){var object_keys=require("./helpers/object-keys"),methods=require("./mixins/methods"),computed=require("./mixins/computed"),filters=require("./mixins/filters"),data=require("./mixins/data"),template=require("./helpers/generate-table-html");exports.install=function(Vue,globalOptions){var client={template:template({source:"Client",rowFilters:"| search q | orderBy orderBy.column orderBy.ascending | setCount | page",trackBy:'track-by="id"',columnFilters:"| date | highlightMatches column"}),mixins:[data,methods,computed,filters],props:{data:{type:Array,required:!0},options:{type:Object,required:!1,"default":function(){return{}}}},created:function(){var defaults=require("./config/defaults")();this.options=this.initOptions(defaults,globalOptions,this.options),this.options.compileTemplates&&this.setClientWatchers(),this.limit=this.options.perPage,this.allColumns=object_keys(this.data[0]),this.queryable=this.options.columns.length?this.options.columns:this.allColumns,this.templatesKeys=object_keys(this.options.templates),this.customColumns=this.templatesKeys.diff(this.allColumns),this.columns=this.queryable.concat(this.customColumns),this.addCustomColumns(),this.initOrderBy(this.columns[0]),this.query=this.initQuery(this.queryable),this.count=this.data.length},ready:function(){this.options.dateColumns.length&&this.initDateFilters()},data:function(){return{source:"client"}},computed:{q:require("./computed/q")},filters:{page:require("./filters/page"),setCount:require("./filters/set-count"),date:require("./filters/date"),search:require("./filters/search")},methods:{setClientWatchers:require("./methods/set-client-watchers")}};Vue.component("v-client-table",client)}},{"./computed/q":4,"./config/defaults":7,"./filters/date":8,"./filters/page":10,"./filters/search":12,"./filters/set-count":13,"./helpers/generate-table-html":15,"./helpers/object-keys":18,"./methods/set-client-watchers":36,"./mixins/computed":42,"./mixins/data":43,"./mixins/filters":44,"./mixins/methods":45}],48:[function(require,module,exports){var object_keys=require("./helpers/object-keys"),methods=require("./mixins/methods"),computed=require("./mixins/computed"),filters=require("./mixins/filters"),data=require("./mixins/data"),template=require("./helpers/generate-table-html");exports.install=function(Vue,globalOptions){var server={template:template({source:"Server",rowFilters:"",trackBy:"",columnFilters:"| highlightMatches column"}),mixins:[data,methods,computed,filters],props:{url:{type:String,required:!0},options:{type:Object,required:!1,"default":function(){return{}}}},created:function(){var defaults=require("./config/defaults")();this.options=this.initOptions(defaults,globalOptions,this.options),this.options.compileTemplates&&this.$on("vue-tables.loaded",function(){this.compileTemplates()}),this.initOrderBy("id"),this.limit=this.options.perPage,this.getData().then(function(data){var data=data.data;return data.count||this.options.columns.length?(this.allColumns=object_keys(data.data[0]),this.columns=this.options.columns.length?this.options.columns:this.allColumns,this.query=this.initQuery(this.columns),this.templatesKeys=object_keys(this.options.templates),this.customColumns=this.templatesKeys?this.templatesKeys.diff(this.columns):[],this.columns=this.columns.concat(this.customColumns),this.setData(data),void(this.options.dateColumns.length&&setTimeout(function(){this.initDateFilters()}.bind(this),0))):void console.error("v-server-table: unable to set column names. No results returned from server upon first request. Please declare the columns excplicitly.")}.bind(this))},data:function(){return{source:"server",data:[],lastKeyStrokeAt:!1}},methods:{refresh:require("./methods/refresh"),getData:require("./methods/get-data"),setData:require("./methods/set-data")}};Vue.component("v-server-table",server)}},{"./config/defaults":7,"./helpers/generate-table-html":15,"./helpers/object-keys":18,"./methods/get-data":26,"./methods/refresh":34,"./methods/set-data":37,"./mixins/computed":42,"./mixins/data":43,"./mixins/filters":44,"./mixins/methods":45}],49:[function(require,module,exports){!function(isNode){function merge_recursive(base,extend){if("object"!==typeOf(base))return extend;for(var key in extend)"object"===typeOf(base[key])&&"object"===typeOf(extend[key])?base[key]=merge_recursive(base[key],extend[key]):base[key]=extend[key];return base}function merge(clone,recursive,argv){var result=argv[0],size=argv.length;(clone||"object"!==typeOf(result))&&(result={});for(var index=0;size>index;++index){var item=argv[index],type=typeOf(item);if("object"===type)for(var key in item){var sitem=clone?Public.clone(item[key]):item[key];recursive?result[key]=merge_recursive(result[key],sitem):result[key]=sitem}}return result}function typeOf(input){return{}.toString.call(input).slice(8,-1).toLowerCase()}var Public=function(clone){return merge(clone===!0,!1,arguments)},publicName="merge";Public.recursive=function(clone){return merge(clone===!0,!0,arguments)},Public.clone=function(input){var index,size,output=input,type=typeOf(input);if("array"===type)for(output=[],size=input.length,index=0;size>index;++index)output[index]=Public.clone(input[index]);else if("object"===type){output={};for(index in input)output[index]=Public.clone(input[index])}return output},isNode?module.exports=Public:window[publicName]=Public}("object"==typeof module&&module&&"object"==typeof module.exports&&module.exports)},{}],50:[function(require,module,exports){String.prototype.ucfirst=require("./lib/helpers/ucfirst"),Array.prototype.diff=require("./lib/helpers/array-diff"),exports.client=require("./lib/v-client-table"),exports.server=require("./lib/v-server-table")},{"./lib/helpers/array-diff":14,"./lib/helpers/ucfirst":19,"./lib/v-client-table":47,"./lib/v-server-table":48}]},{},[50])(50)});
