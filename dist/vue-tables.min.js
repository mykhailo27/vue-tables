!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var f;"undefined"!=typeof window?f=window:"undefined"!=typeof global?f=global:"undefined"!=typeof self&&(f=self),f.VueTables=e()}}(function(){return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(_dereq_,module,exports){String.prototype.ucfirst=_dereq_("./lib/helpers/ucfirst"),Array.prototype.diff=_dereq_("./lib/helpers/array-diff"),exports.client=_dereq_("./lib/v-client-table"),exports.server=_dereq_("./lib/v-server-table")},{"./lib/helpers/array-diff":12,"./lib/helpers/ucfirst":17,"./lib/v-client-table":29,"./lib/v-server-table":30}],2:[function(_dereq_,module,exports){module.exports={get:function(){return Math.ceil(this.page/this.options.pagination.chunk)}}},{}],3:[function(_dereq_,module,exports){module.exports={get:function(){return(this.currentChunk-1)*this.options.pagination.chunk+1}}},{}],4:[function(_dereq_,module,exports){module.exports={get:function(){return Math.ceil(this.totalPages/this.options.pagination.chunk)}}},{}],5:[function(_dereq_,module,exports){module.exports={get:function(){return Math.ceil(this.count/this.limit)}}},{}],6:[function(_dereq_,module,exports){module.exports=function(){return function(){return{columns:[],perPage:10,sortable:[],templates:{},delay:500,dateFormat:"",texts:{count:"{count} Records",filter:"Filter Results:",filterPlaceholder:"Search query",limit:"Records:",page:"Page:",noResults:"No matching records",filterBy:"Filter by {column}"},filterByColumn:!1,headings:{},pagination:{dropdown:!1,chunk:10}}}}},{}],7:[function(_dereq_,module,exports){module.exports=function(property){return property instanceof Date?this.dateFormatter(property):property}},{}],8:[function(_dereq_,module,exports){module.exports=function(data){var limit=parseInt(this.limit),page=parseInt(this.page),offset=limit*(page-1);return data.slice(offset,limit+offset)}},{}],9:[function(_dereq_,module,exports){module.exports=function(value,row,column){if(-1==$.inArray(column,this.templatesKeys))return value;var regex,template=this.options.templates[column];return this.allColumns.forEach(function(col){regex=new RegExp("{"+col+"}","g"),template=template.replace(regex,String(row[col]))}.bind(this)),template}},{}],10:[function(_dereq_,module,exports){var object_filled_keys_count=_dereq_("../helpers/object-filled-keys-count");module.exports=function(data,query){var totalQueries=query?1:0;if(this.options.filterByColumn&&(query=JSON.parse(query),totalQueries=object_filled_keys_count(query)),!totalQueries)return data;var value,found,currentQuery;return data.filter(function(row,index){return found=0,this.queryable.forEach(function(column){value=String(row[column]).toLowerCase(),currentQuery=this.options.filterByColumn?query[column]:query,currentQuery=currentQuery.toLowerCase(),currentQuery&&value.indexOf(currentQuery)>-1&&found++}.bind(this)),found==totalQueries}.bind(this))}},{"../helpers/object-filled-keys-count":15}],11:[function(_dereq_,module,exports){module.exports=function(data){return this.count=data.length,data}},{}],12:[function(_dereq_,module,exports){module.exports=function(a){return this.filter(function(i){return a.indexOf(i)<0})}},{}],13:[function(_dereq_,module,exports){module.exports={units:[],dateUnitsCount:0,separator:null,get:function(format){try{var dateAndTime=format.split(" "),date=dateAndTime[0],time=dateAndTime.length>1?dateAndTime[1]:!1,regex=new RegExp("[-./]"),separator=date.match(regex);this.separator=separator?separator[0]:"-";var dateUnits=date.split(regex);this.dateUnitsCount=dateUnits.length;var timeUnits=time?time.split(":"):[];return dateUnits.push.apply(dateUnits,timeUnits),this._pushUnits(dateUnits),this._formatter()}catch(err){return format&&console.warn(err),function(date){return date.toLocaleDateString()}}},_formatter:function(){return function(date){var separator,formattedDate="";return this.units.forEach(function(unit,index){separator=this._getSeparator(index+1),formattedDate+=unit(date)+separator}.bind(this)),formattedDate.slice(0,-1)}.bind(this)},_getSeparator:function(index){switch(!0){case index<this.dateUnitsCount:return this.separator;case index==this.dateUnitsCount:return" ";case index>this.dateUnitsCount:return":"}},_pushUnits:function(units){return units.every(function(unit,index){return(unit=this._getUnitFunction(unit))?(this.units.push(unit),!0):!1}.bind(this)),this.units.length},_getUnitFunction:_dereq_("./get-unit-function")}},{"./get-unit-function":14}],14:[function(_dereq_,module,exports){module.exports=function(unit){switch(unit){case"d":return function(date){return date.getDate()};case"m":return function(date){return date.getMonth()+1};case"D":return function(date){return("0"+date.getDate()).slice(-2)};case"M":return function(date){return("0"+(date.getMonth()+1)).slice(-2)};case"Y":case"y":return function(date){return date.getFullYear()};case"g":return function(date){var hours=date.getHours();return hours>12?hours-12:hours};case"G":return function(date){return date.getHours()};case"h":return function(date){return hours=date.getHours(),hours=hours>12?hours-12:hours,("0"+hours).slice(-2)};case"H":return function(date){return("0"+date.getHours()).slice(-2)};case"i":return function(date){return("0"+date.getMinutes()).slice(-2)};case"s":return function(date){return("0"+date.getSeconds()).slice(-2)}}throw"vue-tables: invalid date format. Resorting to Date.toLocaleDateString()"}},{}],15:[function(_dereq_,module,exports){module.exports=function(obj){var count=0;for(var prop in obj)obj[prop].trim()&&count++;return count}},{}],16:[function(_dereq_,module,exports){module.exports=function(obj){var keys=[];for(var prop in obj)keys.push(prop);return keys}},{}],17:[function(_dereq_,module,exports){module.exports=function(){return this.charAt(0).toUpperCase()+this.slice(1)}},{}],18:[function(_dereq_,module,exports){module.exports=function(index){return this.page==index+1?"active":""}},{}],19:[function(_dereq_,module,exports){module.exports=function(){return this.data.forEach(function(row,index){this.extras.forEach(function(extra){this.$set("data["+index+"]."+extra,this.options.templates[extra])}.bind(this))}.bind(this)),this.data}},{}],20:[function(_dereq_,module,exports){module.exports=function(direction){var page=(this.currentChunk-1+direction)*this.options.pagination.chunk+1;this.setPage(page)}},{}],21:[function(_dereq_,module,exports){module.exports=function(direction){return 1==direction&&this.currentChunk==this.totalChunks||-1==direction&&1==this.currentChunk}},{}],22:[function(_dereq_,module,exports){module.exports=function(text,value){if(!this.options.texts)return"";var text=this.options.texts[text];return text&&value&&(text=text.replace(/{.+}/,value)),text}},{}],23:[function(_dereq_,module,exports){module.exports=function(value){return this.options.headings.hasOwnProperty(value)?this.options.headings[value]:value.split("_").join(" ").ucfirst()}},{}],24:[function(_dereq_,module,exports){module.exports=function(queryable){if(!this.options.filterByColumn)return"";var query={};return queryable.forEach(function(column){query[column]=""}.bind(this)),query}},{}],25:[function(_dereq_,module,exports){module.exports=function(colName){this.sortable(colName)&&(colName==this.orderBy&&(this.ascending=1==this.ascending?-1:1),this.orderBy=colName,"server"==this.source&&this.getData().done(function(data){this.setData(data)}.bind(this)))}},{}],26:[function(_dereq_,module,exports){module.exports=function(column){return this.sortable(column)?column!=this.orderBy?"":1==this.ascending?"glyphicon-chevron-up":"glyphicon-chevron-down":void 0}},{}],27:[function(_dereq_,module,exports){module.exports=function(page){this.page=page,"server"==this.source&&this.getData().done(function(data){this.setData(data)}.bind(this))}},{}],28:[function(_dereq_,module,exports){module.exports=function(column){var isExtra=this.extras.indexOf(column)>-1;if(isExtra)return!1;var sortAll=!this.options.sortable.length;return sortAll?!0:this.options.sortable.indexOf(column)>-1}},{}],29:[function(_dereq_,module,exports){var object_keys=_dereq_("./helpers/object-keys"),defaults=_dereq_("./config/defaults")();exports.install=function(Vue,globalOptions){var client={template:'<div class="VueTables VueTables--client"> <div class="row"> <div class="col-md-6"> <div v-if="!options.filterByColumn" class="form-group form-inline pull-left VueTables__search"> <label>{{display(\'filter\')}}</label> <input class="form-control" type="text" placeholder="{{display(\'filterPlaceholder\')}}" @keyup="setPage(1)" v-model="query"> </div></div><div class="col-md-6"> <div v-if="options.pagination && options.pagination.dropdown && totalPages>0" class="form-group form-inline pull-right VueTables__dropdown-pagination"> <label>{{display(\'page\')}}</label> <select class="form-control" v-model="page" @change="setPage(page)"> <option v-for="page in totalPages">{{page+1}}</option> </select> </div><div class="form-group form-inline pull-right VueTables__limit"> <label>{{display(\'limit\')}}</label> <select class="form-control" v-model="limit" @change="setPage(1)" > <option v-for="length in lengths">{{length}}</option> </select></div></div></div><table class="VueTables__table table table-striped"> <thead> <tr> <th @click="orderByColumn(column)" v-for="column in columns"><span class="VueTables__heading">{{getHeading(column)}}</span> <span class="VueTables__sort-icon glyphicon" v-bind:class="orderClass(column)"></span> </th> </tr><tr v-if="options.filterByColumn" class="VueTables__filters-row"> <th v-for="column in columns"> <input @keyup="setPage(1)" v-if="extras.indexOf(column)==-1" class="form-control" type="text" placeholder="{{display(\'filterBy\',getHeading(column))}}" v-model="query[column]"> </th></tr></thead><tbody> <tr v-for="row in data | search q| orderBy orderBy ascending | setCount | page" track-by="id"> <td v-for="column in columns" v-html="row[column] | render row column | date"></td></tr><tr v-if="count==0"class="VueTables__no-results"><td class="text-center"colspan="{{columns.length}}">{{display(\'noResults\')}}</td></tr></tbody></table><ul v-show="totalPages>1" v-if="options.pagination && !options.pagination.dropdown" class="pagination VueTables__pagination"> <li class="VueTables__pagination-item VueTables__pagination-item-prev" v-bind:class="disabled(-1)?\'disabled\':\'\'"> <a href="javascript:void(0);" @click="!disabled(-1) && chunk(-1)"><<</a></li><li class="VueTables__pagination-item"v-for="page in options.pagination.chunk"v-if="paginationStart + $index <=totalPages"v-bind:class="active(paginationStart + $index - 1)"><a href="javascript:void(0);"@click="setPage(paginationStart + $index)">{{paginationStart + $index}}</a></li><li class="VueTables__pagination-item VueTables__pagination-item-next"v-bind:class="disabled(1)?\'disabled\':\'\'"><a href="javascript:void(0);"@click="!disabled(1) && chunk(1)">>></a></li></ul><p v-if="count!=0"class="VueTables__count">{{display(\'count\', count)}}</p></div>',props:{data:{type:Array,required:!0},options:{type:Object,required:!1,"default":function(){return{}}}},ready:function(){this.source="client",this.defaults=defaults(),globalOptions&&(this.defaults=$.extend(!0,this.defaults,globalOptions)),this.options=$.extend(!0,this.defaults,this.options),this.lengths.indexOf(this.options.perPage)>-1&&(this.limit=this.options.perPage),this.dateFormatter=_dereq_("./helpers/date-formatter").get(this.options.dateFormat),this.allColumns=object_keys(this.data[0]),this.queryable=this.getQueryableColumns(),this.query=this.initQuery(this.queryable),this.templatesKeys=object_keys(this.options.templates),this.extras=this.templatesKeys.diff(this.allColumns),this.columns=this.queryable.concat(this.extras),this.data=this.addExtras(),this.orderBy=this.columns[0],this.count=this.data.length},data:function(){return{source:null,columns:[],allColumns:!1,totalPages:null,lengths:[5,10,20,50],ascending:1,orderBy:null,query:null,page:1,count:0,limit:10,queryable:[]}},computed:{totalPages:_dereq_("./computed/total-pages"),paginationStart:_dereq_("./computed/pagination-start"),totalChunks:_dereq_("./computed/total-chunks"),currentChunk:_dereq_("./computed/current-chunk"),q:function(){return this.options.filterByColumn?JSON.stringify(this.query):this.query}},filters:{page:_dereq_("./filters/page"),setCount:_dereq_("./filters/set-count"),date:_dereq_("./filters/date"),render:_dereq_("./filters/render"),search:_dereq_("./filters/search")},methods:{initQuery:_dereq_("./methods/init-query"),active:_dereq_("./methods/active"),orderClass:_dereq_("./methods/order-class"),orderByColumn:_dereq_("./methods/order-by-column"),getHeading:_dereq_("./methods/get-heading"),setPage:_dereq_("./methods/set-page"),addExtras:_dereq_("./methods/add-extras"),sortable:_dereq_("./methods/sortable"),chunk:_dereq_("./methods/chunk"),disabled:_dereq_("./methods/disabled"),display:_dereq_("./methods/display"),getQueryableColumns:function(){if(!this.options.columns.length)return this.allColumns;var queryable=this.allColumns.filter(function(n){return-1!=this.options.columns.indexOf(n)}.bind(this));return queryable.length?queryable:this.allColumns}}};Vue.component("v-client-table",client)}},{"./computed/current-chunk":2,"./computed/pagination-start":3,"./computed/total-chunks":4,"./computed/total-pages":5,"./config/defaults":6,"./filters/date":7,"./filters/page":8,"./filters/render":9,"./filters/search":10,"./filters/set-count":11,"./helpers/date-formatter":13,"./helpers/object-keys":16,"./methods/active":18,"./methods/add-extras":19,"./methods/chunk":20,"./methods/disabled":21,"./methods/display":22,"./methods/get-heading":23,"./methods/init-query":24,"./methods/order-by-column":25,"./methods/order-class":26,"./methods/set-page":27,"./methods/sortable":28}],30:[function(_dereq_,module,exports){var object_keys=_dereq_("./helpers/object-keys"),defaults=_dereq_("./config/defaults")();exports.install=function(Vue,globalOptions){var server={template:'<div class="VueTables VueTables--server"> <div class="row"> <div class="col-md-6"> <div v-if="!options.filterByColumn" class="form-group form-inline pull-left VueTables__search"> <label>{{display(\'filter\')}}</label> <input class="form-control" type="text" placeholder="{{display(\'filterPlaceholder\')}}" @keyup="search()" v-model="query"/> </div></div><div class="col-md-6"> <div v-if="options.pagination && options.pagination.dropdown && totalPages>0" class="form-group form-inline pull-right VueTables__dropdown-pagination"> <label>{{display(\'page\')}}</label> <select class="form-control" v-model="page" @change="setPage(page)"> <option v-for="page in totalPages">{{page+1}}</option> </select></div><div class="form-group form-inline pull-right VueTables__limit"> <label>{{display(\'limit\')}}</label> <select class="form-control" v-model="limit" name="{{filterPlaceholder}}" @change="setPage(1)" > <option v-for="length in lengths">{{length}}</option></select></div></div></div><table class="VueTables__table table table-striped"> <thead> <tr> <th @click="orderByColumn(column)" v-for="column in columns"><span class="VueTables__heading">{{getHeading(column)}}</span> <span class="VueTables__sort-icon glyphicon" v-bind:class="orderClass(column)"></span></th> </tr><tr v-if="options.filterByColumn" class="VueTables__filters-row"> <th v-for="column in columns"> <input v-if="extras.indexOf(column)==-1" class="form-control" type="text" placeholder="{{display(\'filterBy\',getHeading(column))}}" v-model="query[column]" @keyup="search(true)"> </th> </tr></thead> <tbody> <tr v-for="row in data"> <td v-for="column in columns" v-html="row[column] | render row column"></td></tr><tr v-if="count==0"> <td class="VueTables__no-results text-center" colspan="{{columns.length}}">{{display(\'noResults\')}}</td></tr></tbody></table><ul v-show="totalPages>1" v-if="options.pagination && !options.pagination.dropdown" class="pagination VueTables__pagination"> <li class="VueTables__pagination-item VueTables__pagination-item-prev" v-bind:class="disabled(-1)?\'disabled\':\'\'"> <a href="javascript:void(0);" @click="!disabled(-1) && chunk(-1)"><<</a></li><li class="VueTables__pagination-item"v-for="page in options.pagination.chunk"v-if="paginationStart + $index <=totalPages"v-bind:class="active(paginationStart + $index - 1)"><a href="javascript:void(0);"@click="setPage(paginationStart + $index)">{{paginationStart + $index}}</a></li><li class="VueTables__pagination-item VueTables__pagination-item-next"v-bind:class="disabled(1)?\'disabled\':\'\'"><a href="javascript:void(0);"@click="!disabled(1) && chunk(1)">>></a></li></ul><p v-if="count!=0"class="VueTables__count">{{display(\'count\', count)}}</p></div>',props:{url:{type:String,required:!0},options:{type:Object,required:!1,"default":function(){return{}}}},ready:function(){this.source="server",this.defaults=defaults(),globalOptions&&(this.defaults=$.extend(!0,this.defaults,globalOptions)),this.options=$.extend(!0,this.defaults,this.options),this.lengths.indexOf(this.options.perPage)>-1&&(this.limit=this.options.perPage),this.getData().done(function(data){return data.count||this.options.columns.length?(this.allColumns=object_keys(data.data[0]),this.columns=this.options.columns.length?this.options.columns:this.allColumns,this.query=this.initQuery(this.columns),this.templatesKeys=object_keys(this.options.templates),this.extras=this.templatesKeys?this.templatesKeys.diff(this.columns):[],this.columns=this.columns.concat(this.extras),this.orderBy=this.columns[0],void this.setData(data)):void console.error("vue-tables: unable to set column names. No results returned from server upon first request. Please declare the columns excplicitly.")}.bind(this))},data:function(){return{data:[],source:null,columns:[],allColumns:!1,totalPages:null,lengths:[5,10,20,50],ascending:1,orderBy:null,query:null,page:1,count:0,limit:10,countTemplate:"{count} Records",lastKeyStrokeAt:!1,loading:!1}},computed:{totalPages:_dereq_("./computed/total-pages"),paginationStart:_dereq_("./computed/pagination-start"),totalChunks:_dereq_("./computed/total-chunks"),currentChunk:_dereq_("./computed/current-chunk")},filters:{render:_dereq_("./filters/render")},methods:{initQuery:_dereq_("./methods/init-query"),active:_dereq_("./methods/active"),orderClass:_dereq_("./methods/order-class"),display:_dereq_("./methods/display"),orderByColumn:_dereq_("./methods/order-by-column"),getHeading:_dereq_("./methods/get-heading"),setPage:_dereq_("./methods/set-page"),addExtras:_dereq_("./methods/add-extras"),sortable:_dereq_("./methods/sortable"),chunk:_dereq_("./methods/chunk"),disabled:_dereq_("./methods/disabled"),search:function(byColumn){var elapsed,query=this.getQuery(byColumn);this.lastKeyStrokeAt=new Date,setTimeout(function(){elapsed=new Date-this.lastKeyStrokeAt,elapsed>=this.options.delay&&(this.page=1,this.loading=!0,this.getData(query,byColumn).done(function(data){this.setData(data),this.loading=!1}.bind(this)))}.bind(this),this.options.delay)},refresh:function(){this.search(this.byColumn)},getQuery:function(byColumn){return byColumn?$.param(this.query):this.query.trim()},getData:function(query,byColumn){this.$dispatch("vue-tables.loading");var data={query:query,limit:this.limit,orderBy:this.orderBy,ascending:this.ascending,page:this.page,byColumn:byColumn?1:0},data=$.param(data);return $.ajax({url:this.url,dataType:"json",data:data})},setData:function(data){this.data=data.data,this.count=data.count,this.addExtras(),setTimeout(function(){this.$dispatch("vue-tables.loaded",data)}.bind(this),0)}}};Vue.component("v-server-table",server)}},{"./computed/current-chunk":2,"./computed/pagination-start":3,"./computed/total-chunks":4,"./computed/total-pages":5,"./config/defaults":6,"./filters/render":9,"./helpers/object-keys":16,"./methods/active":18,"./methods/add-extras":19,"./methods/chunk":20,"./methods/disabled":21,"./methods/display":22,"./methods/get-heading":23,"./methods/init-query":24,"./methods/order-by-column":25,"./methods/order-class":26,"./methods/set-page":27,"./methods/sortable":28}]},{},[1])(1)});
